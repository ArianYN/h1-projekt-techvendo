@page "/profileviewer"
@using Npgsql;

<body id="pageBody">

    <h1 id="profileName">@firstName @lastName</h1>

        <div id="descriptionBox">
            <h1>Description:</h1>
            <p>@description</p>
        </div>

        <div id="infoBox">
            <h1>Joined:</h1>
            <p>@joined</p>
            <h1>Location:</h1>
            <p>@location</p>
        </div>

        <div class="profilePicture">
            <img src="testprofilepicture.png" alt="Profile Picture"/>
        </div>

        <div id="selling">

        </div>
   
</body>


<style>
    .container {
        display: flex;
        align-items: flex-start;
    }
    #pageBody {
        background-color: black;
    }
    #profileName {
        margin-left: 55px;
        position: relative;
        font-size: 50px;
        font-weight: bold;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin-top: 20px;
        color: white;
    }

    #descriptionBox {
        float: left;
        margin-left: 55px;
        margin-top: 35px;
        border: 2px solid white;
        padding: 20px;
        width: 600px;
        height: 230px;
        border-radius: 20px;
    }

    #infoBox {
        float: left;
        margin-left: 30px;
        margin-top: 35px;
        border: 2px solid white;
        padding: 20px;
        width: 170px;
        height: 170px;
        border-radius: 20px;
    }
   
    #descriptionBox p{
        margin: 0;
        color: white
    }
    #descriptionBox h1 {
        color: white;
        margin-bottom: 10px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 20px;
        font-weight: bold;
    }

    #infoBox h1 {
        color: white;
        margin-bottom: 10px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 20px;
        font-weight: bold;
    }
    #infoBox p {
        margin: 0;
        color: white;
    }

    .profilePicture {
        float: left;
        margin-left: 140px;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        overflow: hidden;
        background-color: grey;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

        .profilePicture img {
            max-width: 100%;
            max-height: 100%; 
            display: block;
            margin: auto;
        }

    @@media only screen and (min-width: 1920px) {
        #descriptionBox {
            float: left;
            margin-left: 55px;
            margin-top: 35px;
            border: 2px solid white;
            padding: 20px;
            width: 900px;
            height: 230px;
            border-radius: 20px;
        }

        #infoBox {
            float: left;
            margin-left: 70px;
            margin-top: 35px;
            border: 2px solid white;
            padding: 20px;
            width: 170px;
            height: 170px;
            border-radius: 20px;
        }

        .profilePicture {
            float: left;
            margin-left: 200px;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            overflow: hidden;
            background-color: grey;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    }

    @@media only screen and (max-width: 600px) {
        #descriptionBox {
            float: left;
            margin-left: 55px;
            margin-top: 35px;
            border: 2px solid white;
            padding: 20px;
            width: 300px;
            height: 230px;
            border-radius: 20px;
        }
    }
</style>
@code {

    private string firstName = "Firstname";
    private string lastName = "Lastname";
    private string description = "UserDescription";

    private string joinedTemp = "";
    private string joined = "00-00-0000";
    private string location = "";

    private string connectionString = "Host=ep-purple-star-a20n8auz.eu-central-1.aws.neon.tech;Port=5432;Username=techvendo69;Password=qVyZgOJ36HtK;Database=TechVendo;SslMode=Require;";
    private NpgsqlConnection connection;

    protected override void OnInitialized()
    
    {

        base.OnInitialized();
        connection = new NpgsqlConnection(connectionString);

        try
        { 
            connection.Open();

            string SelectSQL = "SELECT * FROM userprofiles";
            using (NpgsqlCommand command = new NpgsqlCommand(SelectSQL, connection))
            {
                using (NpgsqlDataReader reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        firstName = reader["firstname"].ToString();
                        lastName = reader["lastname"].ToString();
                        description = reader["description"].ToString();
                        joinedTemp = reader["joined"].ToString();
                        location = reader["location"].ToString();

                    }
                }
            }
        }
        catch (Exception e)
        {
            
        }
        DateTime datetimeValue = DateTime.Parse(joinedTemp);
        joined = datetimeValue.ToString("dd-MM-yyyy");
    }

}
